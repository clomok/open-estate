{% extends 'base.html' %}

{% block content %}
<h2>System Settings</h2>

<div class="grid">
    <div class="card">
        <h3>Backup Data</h3>
        <p style="color: #666; font-size: 0.9rem;">
            Download a ZIP file containing a machine-readable JSON backup and a human-readable HTML summary.
        </p>
        <a href="{{ url_for('settings.download_backup') }}" 
           style="display: inline-block; background: #2563eb; color: white; padding: 0.5rem 1rem; text-decoration: none; border-radius: 4px; margin-top: 1rem;">
           Download Backup (.zip)
        </a>
    </div>

    <div class="card" style="border-left: 4px solid #f59e0b;">
        <h3 style="color: #b45309;">Restore Data</h3>
        <p style="color: #666; font-size: 0.9rem;">
            <strong>Warning:</strong> This will overwrite all current data with the data from the backup file.
        </p>
        
        {% with messages = get_flashed_messages() %}
            {% if messages %}
                <div style="background: #fee2e2; color: #991b1b; padding: 0.5rem; margin-bottom: 1rem; border-radius: 4px;">
                    {{ messages[0] }}
                </div>
            {% endif %}
        {% endwith %}

        <form method="post" action="{{ url_for('settings.upload_backup') }}" enctype="multipart/form-data" style="margin-top: 1rem;">
            <input type="file" name="backup_file" accept=".zip,.json" required style="margin-bottom: 0.5rem;">
            <br>
            <button type="submit" 
                    style="background: #f59e0b; color: white; border: none; padding: 0.5rem 1rem; border-radius: 4px; cursor: pointer;">
                Overwrite & Restore
            </button>
        </form>
    </div>
</div>
{% endblock %}